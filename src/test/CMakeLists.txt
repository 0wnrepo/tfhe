cmake_minimum_required(VERSION 3.0)

project(libtfhe-tests)

include_directories(../include/)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++11")

set(HEADERS
    ../include/autogenerated.h
    ../include/lwebootstrappingkey.h
    ../include/lwe-functions.h
    ../include/lwe.h
    ../include/lwekey.h
    ../include/lwekeyswitch.h
    ../include/lweparams.h
    ../include/lwesamples.h
    ../include/multiplication.h
    ../include/numeric-functions.h
    ../include/polynomials.h
    ../include/ringgsw.h
    ../include/ringlwe.h
    ../include/toruspolynomial-functions.h
    )

if (DEFAULT_FFT_PROCESSOR STREQUAL "fftw")
set(RUNTIME_LIBS
    tfhe-fftw
    -lfftw3
    )
elseif (DEFAULT_FFT_PROCESSOR STREQUAL "nayuki-portable")
set(RUNTIME_LIBS
    tfhe-nayuki-portable
    )
elseif (DEFAULT_FFT_PROCESSOR STREQUAL "nayuki-avx")
set(RUNTIME_LIBS
    tfhe-nayuki-avx
    )
endif (DEFAULT_FFT_PROCESSOR STREQUAL "fftw") 


add_executable(test-bootstrapping test-bootstrapping.cpp ${HEADERS})
add_executable(test-bootstrapping-fft2 test-bootstrapping-fft2.cpp ${HEADERS})
add_executable(test-deb-boot test-deb-boot.cpp ${HEADERS})
add_executable(test-decomp-ringgsw test-decomp-ringgsw.cpp ${HEADERS})
add_executable(test-lwe test-lwe.cpp ${HEADERS})
add_executable(test-multiplication test-multiplication.cpp ${HEADERS})
add_executable(test-ringlwe test-ringlwe.cpp ${HEADERS})

target_link_libraries(test-bootstrapping ${RUNTIME_LIBS})
target_link_libraries(test-bootstrapping-fft2 ${RUNTIME_LIBS})
target_link_libraries(test-deb-boot ${RUNTIME_LIBS})
target_link_libraries(test-decomp-ringgsw ${RUNTIME_LIBS})
target_link_libraries(test-lwe ${RUNTIME_LIBS})
target_link_libraries(test-multiplication ${RUNTIME_LIBS})
target_link_libraries(test-ringlwe ${RUNTIME_LIBS})
