cmake_minimum_required(VERSION 3.0)

project(libtfhe)

# include the fft processors in the build process
add_subdirectory(fft_processors)

include_directories(../include/)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++11")

set(SRCS
    autogenerated.cpp
    lwebootstrappingkey.cpp
    lwe.cpp
    lwe-functions.cpp
    lwekey.cpp
    lwekeyswitch.cpp
    lweparams.cpp
    lwesamples.cpp
    multiplication.cpp
    numeric-functions.cpp
    polynomials.cpp
    ringgsw.cpp
    ringlwe.cpp
    ringlwefftoperations.cpp
    toruspolynomial-functions.cpp
    )

set(HEADERS
    ../include/autogenerated.h
    ../include/lwebootstrappingkey.h
    ../include/lwe-functions.h
    ../include/lwe.h
    ../include/lwekey.h
    ../include/lwekeyswitch.h
    ../include/lweparams.h
    ../include/lwesamples.h
    ../include/multiplication.h
    ../include/numeric-functions.h
    ../include/polynomials.h
    ../include/ringgsw.h
    ../include/ringlwe.h
    ../include/toruspolynomial-functions.h
    )

if (ENABLE_FFTW) 
    add_library(tfhe-fftw ${SRCS} ${HEADERS} $<TARGET_OBJECTS:tfhe-fft-fftw>)
endif (ENABLE_FFTW) 

if (ENABLE_NAYUKI_AVX) 
    add_library(tfhe-nayuki-avx ${SRCS} ${HEADERS} $<TARGET_OBJECTS:tfhe-fft-nayuki-avx>)
endif (ENABLE_NAYUKI_AVX)

if (ENABLE_NAYUKI_PORTABLE) 
    add_library(tfhe-nayuki-portable ${SRCS} ${HEADERS} $<TARGET_OBJECTS:tfhe-fft-nayuki-portable>)
endif (ENABLE_NAYUKI_PORTABLE) 
